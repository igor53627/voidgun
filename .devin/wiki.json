{
  "project": {
    "name": "Voidgun",
    "description": "Privacy-via-proxy architecture for Ethereum with Railgun integration",
    "version": "0.1.0",
    "repository": "https://github.com/igor53627/voidgun"
  },
  "architecture": {
    "overview": "Voidgun implements a privacy pool using ZK proofs where the wallet retains spending authority via ECDSA signatures. The proxy cannot steal funds - only wallet-signed transactions authorize spends.",
    "crates": {
      "core": "Rust types for keys, notes, merkle trees, Poseidon hashing",
      "prover": "Noir/Barretenberg proving integration for ECDSA verification",
      "contracts": "VoidgunPool Solidity + Rust bindings",
      "reth-plugin": "reth RPC middleware + ExEx for event indexing",
      "railgun-lane": "Railgun protocol integration - EdDSA signatures, Groth16 proofs, Merkle sync"
    },
    "circuits": {
      "transfer": "Noir circuit for shielded transfers with ECDSA verification",
      "withdrawal": "Noir circuit for unshielding funds"
    }
  },
  "technologies": {
    "zk": ["Noir", "Barretenberg", "Groth16", "ark-circom"],
    "crypto": ["Baby Jubjub (EdDSA)", "secp256k1 (ECDSA)", "Poseidon hash"],
    "blockchain": ["Ethereum", "reth", "Solidity", "Foundry"],
    "rust": ["arkworks", "alloy", "tokio"]
  },
  "key_concepts": {
    "eddsa_circomlib": {
      "description": "EdDSA on Baby Jubjub using circomlib's Poseidon-based variant",
      "signing_equation": "S = r + hm * s (mod subOrder)",
      "verification_equation": "S * Base8 == R8 + 8 * hm * A",
      "key_derivation": "A = Base8 * (s >> 3) where s is pruned blake512 hash",
      "coordinate_transform": "x_ark = sqrt(168700) * x_circ for arkworks <-> circomlib"
    },
    "railgun_circuits": {
      "description": "Circom circuits for shielded transactions",
      "variants": "Named by input/output counts: 01x01, 02x02, etc.",
      "artifacts": "WASM for witness generation, ZKEY for proving"
    },
    "merkle_tree": {
      "depth": 16,
      "hash": "Poseidon with BN254 scalar field"
    }
  },
  "testing": {
    "unit_tests": "cargo test -p railgun-lane",
    "proof_generation": "cargo test -p railgun-lane --test proof_generation -- --ignored",
    "e2e_tenderly": "cargo test -p railgun-lane --test onchain_verification test_e2e_auto -- --ignored",
    "requires": {
      "tenderly": "TENDERLY_ACCESS_KEY, TENDERLY_ACCOUNT, TENDERLY_PROJECT",
      "mainnet_rpc": "MAINNET_RPC_URL or ETH_RPC_URL for read-only tests"
    }
  },
  "known_issues": {
    "bb_bigfield_bug": {
      "description": "Released bb CLI has ECDSA bigfield bug",
      "solution": "Build bb from aztec-packages next branch",
      "script": "./scripts/build-bb.sh --install"
    }
  },
  "recent_fixes": {
    "eddsa_secret_storage": {
      "date": "2024-12-19",
      "issue": "BabyJubjubScalar reduced secret mod field order, breaking s = 8 * (s >> 3)",
      "fix": "Store secret as raw bytes, use BigUint for arithmetic"
    }
  }
}
